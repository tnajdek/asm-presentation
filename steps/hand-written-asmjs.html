<pre class="language-javascript"><code class="language-javascript">
function NaivePrime(stdlib, foreign, heap) {
	"use asm";

	var sqrt = stdlib.Math.sqrt,
		floor = stdlib.Math.floor;

	function isPrime(n) {
		n = +n; 
		
		var i = 2.0,
			q = 0.0;

		if(n&lt;2.0) {
			return 0;
		}

		q=+sqrt(n);

		for (i; i &lt;= q; i=(i+1.0)) {
			if(n % i==0.0) {
				return 0;
			}
		}
		return 1;
	}
	
	function countPrimes(n) {
		n = +n;
		
		var counter = 0,
			i = 0.0,
			x = 0;
		
		 for (i; i &lt;= n; i = i + 1.0) {
			 x = isPrime(i)|0;
			if(x|0 == 1|0) {
				counter = counter + 1|0;
			}
		}
		
		return counter|0;
	}

	return {
		isPrime: isPrime,
		countPrimes: countPrimes
	};
}
</code></pre>



<div class="notes">
	<ul>
		<li>This code is not optimised</li>
		<li>It's actually slower than plain js</li>
	</ul>

	<pre class="language-javascript"><code class="language-javascript">
		function isPrime(n) {
			if (n &lt; 2) return false;
			var q = Math.sqrt(n);

			for (var i = 2; i &lt;= q; i++) {
				if (n % i === 0) {
					return false;
				}
			}
			return true;
		}

		function countPrimes(n) {
			var counter = 0,
				i;
			for (i = 0; i &lt;= n; i++) {
				if (isPrime(i)) {
					counter++;
				}
			}
			return counter;
		}
	</code></pre>
</div>

<script>
	Prism.highlightAll();
</script>